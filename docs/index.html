<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>TidyTasks by Teamwork Projects</title>
	<link href="css/styles.css" rel="stylesheet" type="text/css">
	<link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700,800" rel="stylesheet">
	<meta name="apple-mobile-web-app-title" content="TidyTasks">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="apple-touch-icon" href="images/apple-icons/apple-touch-icon.png">
	<link rel="apple-touch-icon" sizes="152x152" href="images/apple-icons/apple-touch-icon-152x152.png">
	<link rel="apple-touch-icon" sizes="180x180" href="images/apple-icons/apple-touch-icon-180x180.png">
	<link rel="apple-touch-icon" sizes="167x167" href="images/apple-icons/apple-touch-icon-167x167.png">
</head>
<body>
	<!--SPLASH-->
	<div class="bs-component splash-container blue-bg" data-bind="visible: currentPage() == 'splash'">
		<div>Loading...</div>
	</div>

	<nav class="navbar navbar-dark" data-bind="visible: showNav, css: {'navbar-dark': !lightNav()}">
		<div class="container">
			<a href="#" class="back-button" data-bind="click: goBack, visible: backButton()">
				<img src="images/icons/back.svg" width="30" height="30" class="svg-icon svg-icon-dark" data-bind="css: {'svg-icon-white': lightNav}" />
			</a>
			<div class="navbar-date" data-bind="text: moment(new Date()).format('DD MMM YYYY'), visible: !backButton()"></div>
			<ul class="navbar-nav navbar-right">
				<li class="nav-item dropdown">
					<a aria-expanded="false" aria-haspopup="true" class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" role="button">
						<img data-bind="attr:{src: userIcon}" src="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" style="width: 25px; height: 25px; border-radius: 50%; background: #FFF; border: 1px solid #CCC; float: left; padding: 0px; margin: 0 10px 0 0;">
					</a>
					<div class="dropdown-menu" style="position: absolute; transform: translate3d(0px, 35px, 0px); top: 20px; left: auto; right: 0px; will-change: transform;">
						<a class="dropdown-item" href="#" target="_blank" data-bind="attr: {href: domain}">Open Projects</a>
						<div class="dropdown-divider"></div>
						<a class="dropdown-item" href="#" data-bind="click: logout">Sign Out</a>
					</div>
				</li>
			</ul>
		</div>
	</nav>

    <!--LOGIN -->
	<div class="bs-component login-container blue-bg" data-bind="visible: currentPage() == 'login'">
		<div class="container">
			<img src="images/projects-monotone-light.svg">
			<h2 class="heading">Get focused today.</h2>
			<form data-bind="submit: processLogin">
				<input class="form-control login-input" id="API-key" placeholder="API key" /> 
				<div class="error" data-bind="text: loginError()"></div>
				<button class="enabled" id="sign-in" type="submit">SIGN IN</button>
			</form>
		</div>
    </div>
    
    <!--  DASHBOARD -->
	<div class="bs-component dashboard-container blue-bg" data-bind="visible: currentPage() == 'dashboard'">
		<div class="container">
			<h2 class="heading">Hey, <span data-bind="text: userFirstname()"></span></h2>
			<p class="total-tasks">You have <span data-bind="text: totalTasks() + 'task' + (totalTasks() == 1 ? '' : 's')"></span> to work on today. <span data-bind="if: totalTasks() == 0">Go you!</span></p>
			<div class="tasks-grid" data-bind="foreach: projects">
				<div class="task-card card border-light" data-bind='click: function () { showProject($data.projectId) }'>
					<div class="title" data-bind="text: $data.projectName"></div>
					<div class="tasks" data-bind="text: $data.taskCount + ' task' + ($data.taskCount == 1 ? '' : 's')"></div>
				</div>
			</div>
		</div>
    </div>
    
    <!-- ADD TASK -->
	<div class="bs-component add-task-container white-bg" data-bind="visible: currentPage() == 'add-task'">
		<div class="add-task-container">
			<form class="add-task" data-bind="submit: createTask">
				<h3 class="heading">Add task</h3>
				<input id="task-name" required placeholder="Task title" /> 
				<div class="actions">
					<button type="submit">ADD IT</button>
				</div>
			</form>
		</div>
	</div>
	
	<!--PROJECT-->
    <div class="bs-component project-container white-bg" data-bind="if: currentProject(), visible: currentPage() == 'project-view'">
		<div>
			<div class="container">
				<h1 class="project-name" data-bind="text: currentProject().projectName"></h1>
				<div class="task-count" data-bind="text: currentProject().taskCount + ' tasks today.'"></div>
				<div class="section" data-bind="foreach: currentProject().tasklists">
					<div class="section-toggler">
						<div class="section-name" data-bind="text: tasklistName"></div>
						<a class="add-task" href="#" data-bind="click: function() {currentPage('add-task'); currentTasklist(tasklistId)}">
							<img class="svg-icon svg-icon-dark" src="images/icons/plus.svg">
						</a>
					</div>
					<div class="tasks-container" data-bind="foreach: $data.tasks">
						<div class="task" data-bind="attr: {'data-task-id' : taskId}">
							<div class="image-container">
								<a href="#" data-bind="click: function () {completeTask(taskId)}">
									<img src="images/icons/task.svg" alt="Complete" class="check" />
								</a>
							</div>
							<div class="task-body">
								<div class="task-name" data-bind="text: taskName, click: toggleDetails"></div>
								<div class="task-details hidden">
									<div class="task-description" data-bind="text: taskDescription"></div>
									<div class="task-controls">
										<div class="open-in-projects control">
											<div class="image-container">
												<img src="images/icons/projects-mark.svg" width="20" height="20" />
											</div>
											<div class="actions">
												<a data-bind="attr: {href: domain() + '#tasks/' + taskId}" class="link" href="#" target="_blank">
													View in Projects
												</a>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
					<a href="#" ></a>
				</div>
			</div>
		</div>
    </div>
    
    <!-- All of the Node.js APIs are available in this renderer process. -->
	<!-- 
        We are using Node.js <script>document.write(process.versions.node)</script>,
        Chromium <script>document.write(process.versions.chrome)</script>,
        and Electron <script>document.write(process.versions.electron)</script>. 
    -->
	<script src="js/jquery.js"></script> 
	<script src="js/knockout.js"></script> 
	<script src="js/lodash.core.js"></script> 
	<script src="js/moment.min.js"></script> 
	<script src="js/popper.js"></script> 
	<script src="js/bootstrap.js"></script> 
	<script src="js/bootstrap-datepicker.js"></script> 
	<script src="js/moment.js"></script> 
	<script src='js/auth.js'></script> 
	<script src='js/app.js'></script> 
</body>
</html>